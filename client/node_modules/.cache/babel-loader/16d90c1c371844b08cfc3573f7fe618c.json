{"ast":null,"code":"import _slicedToArray from \"E:\\\\dinhle\\\\job\\\\GMU_RESEARCH\\\\repos\\\\rac\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"E:\\\\dinhle\\\\job\\\\GMU_RESEARCH\\\\repos\\\\rac\\\\client\\\\src\\\\components\\\\Favorites.js\";\nimport React, { useState, useEffect } from \"react\";\nimport \"../App.css\";\nimport Axios from \"axios\"; //import { withCookies, Cookies } from 'react-cookie';\n// import Cookies from \"js-cookie\";\n\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport { // Nav,\n// Navbar,\n// NavDropdown,\n// NavItem,\nCard, Button } from \"react-bootstrap\"; // import { Redirect } from \"react-router\";\n\nimport { useHistory } from \"react-router\"; // import { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\n// import favorites from \"../images/favorites.jpg\";\n\nimport classNames from \"classnames\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faBookmark as fasB } from \"@fortawesome/free-solid-svg-icons\"; // import { faBookmark as farB } from \"@fortawesome/free-regular-svg-icons\";\n\nimport Popup from \"../common/Popup\";\nimport CommonNav from \"../common/CommonNav\";\nimport { useGlobalConfigContext } from \"../App\";\n\nfunction Favorites() {\n  var _this = this;\n\n  var serverDomain = useGlobalConfigContext()[\"serverDomain\"];\n  var history = useHistory();\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      loggedInUser = _useState2[0],\n      setLoginUser = _useState2[1]; // const [data, setData] = useState(\"\");\n\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      orgData = _useState4[0],\n      setOrgData = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      unit_org = _useState6[0],\n      setUnitOrgData = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      active = _useState8[0],\n      setActive = _useState8[1]; // const [favData, setFavData] = useState([]);\n\n\n  Axios.defaults.withCredentials = true; // const cookieExists = (document.cookie.match(\n  //   /^(?:.*;)?\\s*userId\\s*=\\s*([^;]+)(?:.*)?$/\n  // ) || [, null])[1];\n\n  /* add by dinhle */\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      buttonPoup = _useState10[0],\n      setButtonPoup = _useState10[1];\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      checked = _React$useState2[0],\n      setChecked = _React$useState2[1];\n\n  var handleChangePoupFilterByPhotoID = function handleChangePoupFilterByPhotoID() {\n    setChecked(!checked);\n\n    if (!checked) {\n      Axios.get(serverDomain + \"/favorites/hasID\").then(function (response) {});\n    } else {\n      Axios.get(serverDomain + \"/favorites\").then(function (response) {});\n    }\n  };\n\n  var Checkbox = function Checkbox(_ref) {\n    var label = _ref.label,\n        value = _ref.value,\n        onChange = _ref.onChange;\n    return /*#__PURE__*/React.createElement(\"label\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"checkbox\",\n      checked: value,\n      onChange: onChange,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }\n    }), label);\n  }; // const logoutUser = () => {\n  //   Axios.post( serverDomain+\"/logout\", {}, { withCredentials: \"true\" });\n  //   history.push(\"/login\");\n  //   window.location.reload();\n  // };\n\n\n  var getOrganizations = function getOrganizations(id) {\n    Axios.get(serverDomain + \"/favorites/\" + id).then(function (response) {\n      setActive(id);\n      setUnitOrgData(response.data[0]);\n    });\n  };\n\n  var checkActive = function checkActive(id) {\n    return id === active;\n  };\n\n  var removeFromFavorites = function removeFromFavorites(obj) {\n    Axios.delete(serverDomain + \"/favorites/\", {\n      data: {\n        name: obj.name,\n        organization_id: obj.org_id\n      }\n    }).then(function (response) {\n      console.log(response);\n      window.location.reload();\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  useEffect(function () {\n    Axios.get(serverDomain + \"/login\").then(function (response) {\n      if (response.data.loggedIn === true) {\n        setLoginUser(response.data.user[0].username);\n        setData(response.data);\n        Axios.get(serverDomain + \"/favorites/\").then(function (response) {\n          if (response.data.length > 0) {\n            getOrganizations(response.data[0].org_id);\n          }\n        });\n      } else {\n        history.push(\"/login\");\n      }\n    });\n  }, []);\n\n  if (loggedInUser.length > 0) {\n    console.log(\"User Logged In\");\n  } else {\n    console.log(\"user not logged in\");\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container home\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CommonNav, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    style: {\n      cursor: \"pointer\"\n    },\n    onClick: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Card.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Card.Title, {\n    className: \"cardTitleCustom\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 15\n    }\n  }, \"Favorites\"))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"org_filter\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"main\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"fullWidth\",\n    variant: \"primary\",\n    onClick: function onClick() {\n      return setButtonPoup(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }\n  }, \"Filter Organizations\")), /*#__PURE__*/React.createElement(Popup, {\n    trigger: buttonPoup,\n    setTrigger: setButtonPoup,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 11\n    }\n  }, \"Filter by: \"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Checkbox, {\n    label: \"Photo ID\",\n    value: checked,\n    onChange: handleChangePoupFilterByPhotoID,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 11\n    }\n  }))), orgData.length > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"homeDisplay\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"disp1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  }, \"Total Organizations: \", orgData.length), orgData.map(function (org) {\n    if (loggedInUser.length === 0) {\n      history.push(\"/login\");\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      onClick: function onClick() {\n        return getOrganizations(org.org_id);\n      },\n      className: classNames({\n        ldisp: true,\n        active: checkActive(org.org_id)\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ttl\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 19\n      }\n    }, org.name), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"subttl\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 19\n      }\n    }, org.type));\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"disp2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"root\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"child\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    onClick: function onClick() {\n      return removeFromFavorites(unit_org);\n    },\n    icon: fasB,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"secttl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 15\n    }\n  }, \"Organization\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"secsubttl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 15\n    }\n  }, unit_org.name)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"secttl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 15\n    }\n  }, \"Address\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"secsubttl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 15\n    }\n  }, unit_org.address)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"secttl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 15\n    }\n  }, \"Zip Code\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"secsubttl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 15\n    }\n  }, unit_org.zip_code)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"secttl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 15\n    }\n  }, \"Type\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"secsubttl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 15\n    }\n  }, unit_org.type)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"secttl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 15\n    }\n  }, \"Description\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"secsubttl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 15\n    }\n  }, unit_org.description)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"secttl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 15\n    }\n  }, \"Services\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"secsubttl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 15\n    }\n  }, unit_org.services)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"secttl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 15\n    }\n  }, \"Criteria\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"secsubttl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 15\n    }\n  }, unit_org.criteria)))) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"singleDisplay\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 11\n    }\n  }, \"There is no favorites\")));\n}\n\nexport default Favorites;","map":{"version":3,"sources":["E:/dinhle/job/GMU_RESEARCH/repos/rac/client/src/components/Favorites.js"],"names":["React","useState","useEffect","Axios","Card","Button","useHistory","classNames","FontAwesomeIcon","faBookmark","fasB","Popup","CommonNav","useGlobalConfigContext","Favorites","serverDomain","history","loggedInUser","setLoginUser","orgData","setOrgData","unit_org","setUnitOrgData","active","setActive","defaults","withCredentials","buttonPoup","setButtonPoup","checked","setChecked","handleChangePoupFilterByPhotoID","get","then","response","Checkbox","label","value","onChange","getOrganizations","id","data","checkActive","removeFromFavorites","obj","delete","name","organization_id","org_id","console","log","window","location","reload","catch","error","loggedIn","user","username","setData","length","push","cursor","map","org","ldisp","type","address","zip_code","description","services","criteria"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"../App.css\";\r\nimport Axios from \"axios\";\r\n//import { withCookies, Cookies } from 'react-cookie';\r\n// import Cookies from \"js-cookie\";\r\nimport \"bootstrap/dist/css/bootstrap.css\";\r\nimport {\r\n  // Nav,\r\n  // Navbar,\r\n  // NavDropdown,\r\n  // NavItem,\r\n  Card,\r\n  Button,\r\n} from \"react-bootstrap\";\r\n// import { Redirect } from \"react-router\";\r\nimport { useHistory } from \"react-router\";\r\n// import { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\r\n// import favorites from \"../images/favorites.jpg\";\r\nimport classNames from \"classnames\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faBookmark as fasB } from \"@fortawesome/free-solid-svg-icons\";\r\n// import { faBookmark as farB } from \"@fortawesome/free-regular-svg-icons\";\r\nimport Popup from \"../common/Popup\";\r\nimport CommonNav from \"../common/CommonNav\";\r\nimport { useGlobalConfigContext } from \"../App\";\r\n\r\nfunction Favorites() {\r\n  const serverDomain   = useGlobalConfigContext()[\"serverDomain\"];\r\n  const history = useHistory();\r\n  const [loggedInUser, setLoginUser] = useState(\"\");\r\n  // const [data, setData] = useState(\"\");\r\n  const [orgData, setOrgData] = useState([]);\r\n  const [unit_org, setUnitOrgData] = useState([]);\r\n  const [active, setActive] = useState(false);\r\n  // const [favData, setFavData] = useState([]);\r\n\r\n  Axios.defaults.withCredentials = true;\r\n  // const cookieExists = (document.cookie.match(\r\n  //   /^(?:.*;)?\\s*userId\\s*=\\s*([^;]+)(?:.*)?$/\r\n  // ) || [, null])[1];\r\n  /* add by dinhle */\r\n  const [buttonPoup, setButtonPoup] = useState(false);\r\n  const [checked, setChecked] = React.useState(false);\r\n  const handleChangePoupFilterByPhotoID = () => {\r\n    setChecked(!checked);\r\n    if (!checked) {\r\n      Axios.get( serverDomain+\"/favorites/hasID\").then((response) => {\r\n        \r\n      });\r\n    } else {\r\n      Axios.get( serverDomain+\"/favorites\").then((response) => {\r\n        \r\n      });\r\n    }\r\n  };\r\n\r\n  const Checkbox = ({ label, value, onChange }) => {\r\n    return (\r\n      <label>\r\n        <input type=\"checkbox\" checked={value} onChange={onChange} />\r\n        {label}\r\n      </label>\r\n    );\r\n  };\r\n  // const logoutUser = () => {\r\n  //   Axios.post( serverDomain+\"/logout\", {}, { withCredentials: \"true\" });\r\n  //   history.push(\"/login\");\r\n  //   window.location.reload();\r\n  // };\r\n\r\n  const getOrganizations = (id) => {\r\n    Axios.get( serverDomain+\"/favorites/\" + id).then((response) => {\r\n      setActive(id);\r\n      setUnitOrgData(response.data[0]);\r\n    });\r\n  };\r\n\r\n  const checkActive = (id) => {\r\n    return id === active;\r\n  };\r\n\r\n  const removeFromFavorites = (obj) => {\r\n    Axios.delete( serverDomain+\"/favorites/\", {\r\n      data: {\r\n        name: obj.name,\r\n        organization_id: obj.org_id,\r\n      },\r\n    })\r\n      .then(function(response) {\r\n        console.log(response);\r\n        window.location.reload();\r\n      })\r\n      .catch(function(error) {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    Axios.get( serverDomain+\"/login\").then((response) => {\r\n      if (response.data.loggedIn === true) {\r\n        setLoginUser(response.data.user[0].username);\r\n        setData(response.data);\r\n        Axios.get( serverDomain+\"/favorites/\").then((response) => {\r\n          if (response.data.length > 0) {\r\n            \r\n            getOrganizations(response.data[0].org_id);\r\n          }\r\n        });\r\n      } else {\r\n        history.push(\"/login\");\r\n      }\r\n    });\r\n\r\n\r\n  }, []);\r\n\r\n  if (loggedInUser.length > 0) {\r\n    console.log(\"User Logged In\");\r\n  } else {\r\n    console.log(\"user not logged in\");\r\n  }\r\n\r\n  return (\r\n    <div className=\"container home\">\r\n      <CommonNav />\r\n      <div className=\"row justify-content-center\">\r\n        <div className=\"\">\r\n          <Card style={{ cursor: \"pointer\" }} onClick=\"\">\r\n            <Card.Body>\r\n              <Card.Title className=\"cardTitleCustom\">Favorites</Card.Title>\r\n            </Card.Body>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"org_filter\">\r\n        <main>\r\n            <Button\r\n              className=\"fullWidth\"\r\n              variant=\"primary\"\r\n              onClick={() => setButtonPoup(true)}\r\n            >\r\n              Filter Organizations\r\n            </Button>\r\n        </main>\r\n\r\n        <Popup trigger={buttonPoup} setTrigger={setButtonPoup}>\r\n          <span>Filter by: </span>\r\n          <br></br>\r\n          <Checkbox\r\n            label=\"Photo ID\"\r\n            value={checked}\r\n            onChange={handleChangePoupFilterByPhotoID}\r\n          />\r\n        </Popup>\r\n      </div>\r\n\r\n      {orgData.length > 0 ? (\r\n        <div className=\"homeDisplay\">\r\n          <div className=\"disp1\">\r\n            <h5>Total Organizations: {orgData.length}</h5>\r\n            {orgData.map(function(org) {\r\n              if (loggedInUser.length === 0) {\r\n                history.push(\"/login\");\r\n              }\r\n              return (\r\n                <div\r\n                  onClick={() => getOrganizations(org.org_id)}\r\n                  className={classNames({\r\n                    ldisp: true,\r\n                    active: checkActive(org.org_id),\r\n                  })}\r\n                >\r\n                  <div className=\"ttl\">{org.name}</div>\r\n                  <div className=\"subttl\">{org.type}</div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n          <div className=\"disp2\">\r\n            <div className=\"root\">\r\n              <span className=\"child\">\r\n                <FontAwesomeIcon\r\n                  onClick={() => removeFromFavorites(unit_org)}\r\n                  icon={fasB}\r\n                />\r\n              </span>\r\n            </div>\r\n\r\n            <div className=\"section\">\r\n              <div className=\"secttl\">Organization</div>\r\n              <div className=\"secsubttl\">{unit_org.name}</div>\r\n            </div>\r\n            <div className=\"section\">\r\n              <div className=\"secttl\">Address</div>\r\n              <div className=\"secsubttl\">{unit_org.address}</div>\r\n            </div>\r\n            <div className=\"section\">\r\n              <div className=\"secttl\">Zip Code</div>\r\n              <div className=\"secsubttl\">{unit_org.zip_code}</div>\r\n            </div>\r\n            <div className=\"section\">\r\n              <div className=\"secttl\">Type</div>\r\n              <div className=\"secsubttl\">{unit_org.type}</div>\r\n            </div>\r\n            <div className=\"section\">\r\n              <div className=\"secttl\">Description</div>\r\n              <div className=\"secsubttl\">{unit_org.description}</div>\r\n            </div>\r\n            <div className=\"section\">\r\n              <div className=\"secttl\">Services</div>\r\n              <div className=\"secsubttl\">{unit_org.services}</div>\r\n            </div>\r\n            <div className=\"section\">\r\n              <div className=\"secttl\">Criteria</div>\r\n              <div className=\"secsubttl\">{unit_org.criteria}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"singleDisplay\">\r\n          <h3>There is no favorites</h3>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Favorites;\r\n"]},"metadata":{},"sourceType":"module"}